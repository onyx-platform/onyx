test:
  override:
    - export TEST_TRANSPORT_IMPL=aeron; lein with-profile dev,circle-ci midje 'onyx.log.*':
        timeout: 180

machine:
  java:
    version: oraclejdk8

dependencies:
  pre:
    - "cd .."
    - "git clone https://github.com/real-logic/Aeron.git"
    - "cd Aeron"
    - "git checkout cb3588760f88aac614ec5bbae9e05d1c7a675968"
    - "./gradlew"
    - "gradle install"
  cache_directories:
    - "~/Aeron"

notify:
  webhooks:
    # A list of hook hashes, containing the url field
    # gitter hook
    - url: https://webhooks.gitter.im/e/7f6cadb429def50c94a2