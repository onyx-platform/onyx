<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>onyx.api documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Onyx 0.7.3-beta4 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>onyx</span></div></div></li><li class="depth-2 branch current"><a href="onyx.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compression</span></div></div></li><li class="depth-3"><a href="onyx.compression.nippy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nippy</span></div></a></li><li class="depth-2 branch"><a href="onyx.extensions.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>extensions</span></div></a></li><li class="depth-2 branch"><a href="onyx.interop.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interop</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>commands</span></div></div></li><li class="depth-4 branch"><a href="onyx.log.commands.abort-join-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>abort-join-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.accept-join-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>accept-join-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.backpressure-off.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>backpressure-off</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.backpressure-on.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>backpressure-on</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.exhaust-input.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exhaust-input</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.gc.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gc</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.kill-job.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kill-job</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.leave-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>leave-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.notify-join-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>notify-join-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.peer-replica-view.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>peer-replica-view</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.prepare-join-cluster.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>prepare-join-cluster</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.seal-output.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>seal-output</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.set-replica.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>set-replica</span></div></a></li><li class="depth-4 branch"><a href="onyx.log.commands.signal-ready.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>signal-ready</span></div></a></li><li class="depth-4"><a href="onyx.log.commands.submit-job.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>submit-job</span></div></a></li><li class="depth-3 branch"><a href="onyx.log.curator.html"><div class="inner"><span class="tree" style="top: -517px;"><span class="top" style="height: 526px;"></span><span class="bottom"></span></span><span>curator</span></div></a></li><li class="depth-3 branch"><a href="onyx.log.entry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>entry</span></div></a></li><li class="depth-3"><a href="onyx.log.zookeeper.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zookeeper</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -641px;"><span class="top" style="height: 650px;"></span><span class="bottom"></span></span><span>messaging</span></div></div></li><li class="depth-3 branch"><a href="onyx.messaging.acking-daemon.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>acking-daemon</span></div></a></li><li class="depth-3 branch"><a href="onyx.messaging.aeron-media-driver.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aeron-media-driver</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aeron</span></div></div></li><li class="depth-4"><a href="onyx.messaging.aeron.peer-manager.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>peer-manager</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>monitoring</span></div></div></li><li class="depth-3 branch"><a href="onyx.monitoring.custom-monitoring.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>custom-monitoring</span></div></a></li><li class="depth-3 branch"><a href="onyx.monitoring.measurements.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>measurements</span></div></a></li><li class="depth-3"><a href="onyx.monitoring.no-op-monitoring.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>no-op-monitoring</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>peer</span></div></div></li><li class="depth-3 branch"><a href="onyx.peer.function.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>function</span></div></a></li><li class="depth-3 branch"><a href="onyx.peer.operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>operation</span></div></a></li><li class="depth-3"><a href="onyx.peer.pipeline-extensions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline-extensions</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>plugin</span></div></div></li><li class="depth-3"><a href="onyx.plugin.core-async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core-async</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>scheduling</span></div></div></li><li class="depth-3 branch"><a href="onyx.scheduling.balanced-job-scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>balanced-job-scheduler</span></div></a></li><li class="depth-3 branch"><a href="onyx.scheduling.balanced-task-scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>balanced-task-scheduler</span></div></a></li><li class="depth-3 branch"><a href="onyx.scheduling.common-job-scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common-job-scheduler</span></div></a></li><li class="depth-3 branch"><a href="onyx.scheduling.common-task-scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common-task-scheduler</span></div></a></li><li class="depth-3 branch"><a href="onyx.scheduling.greedy-job-scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>greedy-job-scheduler</span></div></a></li><li class="depth-3 branch"><a href="onyx.scheduling.percentage-job-scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>percentage-job-scheduler</span></div></a></li><li class="depth-3"><a href="onyx.scheduling.percentage-task-scheduler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>percentage-task-scheduler</span></div></a></li><li class="depth-2 branch"><a href="onyx.schema.html"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>schema</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>static</span></div></div></li><li class="depth-3 branch"><a href="onyx.static.default-vals.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>default-vals</span></div></a></li><li class="depth-3 branch"><a href="onyx.static.planning.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>planning</span></div></a></li><li class="depth-3 branch"><a href="onyx.static.rotating-seq.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rotating-seq</span></div></a></li><li class="depth-3"><a href="onyx.static.validation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validation</span></div></a></li><li class="depth-2 branch"><a href="onyx.system.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>system</span></div></a></li><li class="depth-2"><a href="onyx.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="onyx.api.html#var-await-job-completion"><div class="inner"><span>await-job-completion</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-gc"><div class="inner"><span>gc</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-kill-job"><div class="inner"><span>kill-job</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-map-set-workflow-.3Eworkflow"><div class="inner"><span>map-set-workflow-&gt;workflow</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-shutdown-env"><div class="inner"><span>shutdown-env</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-shutdown-peer"><div class="inner"><span>shutdown-peer</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-shutdown-peer-group"><div class="inner"><span>shutdown-peer-group</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-start-env"><div class="inner"><span>start-env</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-start-peer-group"><div class="inner"><span>start-peer-group</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-start-peers"><div class="inner"><span>start-peers</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-submit-job"><div class="inner"><span>submit-job</span></div></a></li><li class="depth-1"><a href="onyx.api.html#var-subscribe-to-log"><div class="inner"><span>subscribe-to-log</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">onyx.api</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-await-job-completion"><h3>await-job-completion</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(await-job-completion peer-config job-id)</code><code>(await-job-completion peer-config job-id monitoring-config)</code></div><div class="doc"><pre class="plaintext">Blocks until job-id has had all of its tasks completed or the job is killed.
Returns true if the job completed successfully, false if the job was killed.</pre></div></div><div class="public anchor" id="var-gc"><h3>gc</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(gc peer-config)</code><code>(gc peer-config monitoring-config)</code></div><div class="doc"><pre class="plaintext">Invokes the garbage collector on Onyx. Compresses all local replicas
for peers, decreasing memory usage. Also deletes old log entries from
ZooKeeper, freeing up disk space.

Local replicas clear out all data about completed and killed jobs -
as if they never existed.</pre></div></div><div class="public anchor" id="var-kill-job"><h3>kill-job</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(kill-job peer-config job-id)</code><code>(kill-job peer-config job-id monitoring-config)</code></div><div class="doc"><pre class="plaintext">Kills a currently executing job, given it&apos;s job ID. All peers executing
tasks for this job cleanly stop executing and volunteer to work on other jobs.
Task lifecycle APIs for closing tasks are invoked. This job is never again scheduled
for execution.</pre></div></div><div class="public anchor" id="var-map-set-workflow-.3Eworkflow"><h3>map-set-workflow-&gt;workflow</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(map-set-workflow-&gt;workflow workflow)</code></div><div class="doc"><pre class="plaintext">Converts a workflow in format:
{:a #{:b :c}
 :b #{:d}}
to format:
[[:a :b]
 [:a :c]
 [:b :d]]</pre></div></div><div class="public anchor" id="var-shutdown-env"><h3>shutdown-env</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(shutdown-env env)</code></div><div class="doc"><pre class="plaintext">Shuts down the given development environment.
</pre></div></div><div class="public anchor" id="var-shutdown-peer"><h3>shutdown-peer</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(shutdown-peer peer)</code></div><div class="doc"><pre class="plaintext">Shuts down the virtual peer, which releases all of its resources
and removes it from the execution of any tasks. This peer will
not longer volunteer for tasks.</pre></div></div><div class="public anchor" id="var-shutdown-peer-group"><h3>shutdown-peer-group</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(shutdown-peer-group peer-group)</code></div><div class="doc"><pre class="plaintext">Shuts down the given peer-group
</pre></div></div><div class="public anchor" id="var-start-env"><h3>start-env</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(start-env env-config)</code><code>(start-env env-config monitoring-config)</code></div><div class="doc"><pre class="plaintext">Starts a development environment using an in-memory implementation ZooKeeper.
</pre></div></div><div class="public anchor" id="var-start-peer-group"><h3>start-peer-group</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(start-peer-group peer-config)</code></div><div class="doc"><pre class="plaintext">Starts a peer group for use in cases where an env is not started (e.g. distributed mode)
</pre></div></div><div class="public anchor" id="var-start-peers"><h3>start-peers</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(start-peers n peer-group)</code><code>(start-peers n {:keys [config], :as peer-group} monitoring-config)</code></div><div class="doc"><pre class="plaintext">Launches n virtual peers. Each peer may be stopped
by passing it to the shutdown-peer function. Optionally takes
a 3rd argument - a monitoring configuration map. See the User Guide
for details.</pre></div></div><div class="public anchor" id="var-submit-job"><h3>submit-job</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(submit-job peer-config job)</code><code>(submit-job peer-config job monitoring-config)</code></div><div class="doc"><pre class="plaintext">Takes a peer configuration, job map, and optional monitoring config,
sending the job to the cluster for eventual execution.</pre></div></div><div class="public anchor" id="var-subscribe-to-log"><h3>subscribe-to-log</h3><h4 class="added">added in 0.6.0</h4><div class="usage"><code>(subscribe-to-log peer-config ch)</code><code>(subscribe-to-log peer-config ch monitoring-config)</code></div><div class="doc"><pre class="plaintext">Sends all events from the log to the provided core.async channel.
Starts at the origin of the log and plays forward monotonically.

Returns a map with keys :replica and :env. :replica contains the origin
replica. :env contains an Component with a :log connection to ZooKeeper,
convenient for directly querying the znodes. :env can be shutdown with
the onyx.api/shutdown-env function</pre></div></div></div></body></html>